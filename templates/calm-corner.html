<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Calm Corner | Theramind</title>
<link rel="icon" href="https://img.icons8.com/fluency/48/brain.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
/* ===================== Theme Variables ===================== */
:root {
  --background: #ffffff;
  --foreground: #111111;
  --primary: #4f46e5;
  --accent: #06b6d4;
  --sidebar-bg: rgba(255,255,255,0.55); /* Light navbar */
  --glass-blur: blur(16px) saturate(180%);
  --button-color: #111; /* toggle text in light theme */
}
body.dark-theme {
  --background: #0d0d0f;
  --foreground: #f0f0f0;
  --primary: #6366f1;
  --accent: #67e8f9;
  --sidebar-bg: rgba(30,30,30,0.55); /* Dark navbar */
  --button-color: #fff; /* toggle text in dark theme */
}

/* General */
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Poppins',sans-serif;
  background:var(--background);
  color:var(--foreground);
  min-height:100vh;
  overflow-x:hidden;
  transition: background 0.3s, color 0.3s;
}

/* ===================== Navbar ===================== */
.tm-nav {
  display:flex;
  align-items:center;
  justify-content:space-between;
  height:75px;
  padding:0 2rem;
  background: var(--sidebar-bg);
  backdrop-filter: var(--glass-blur);
  box-shadow: 0 6px 25px rgba(0,0,0,0.15);
  position: sticky;
  top:0;
  z-index:1000;
}
.tm-brand {
  display:flex;
  align-items:center;
  gap:0.75rem;
  font-weight:700;
  font-size:1.4rem;
  color: var(--foreground);
  text-decoration:none;
}
.tm-brand img { height:36px; }
.tm-navlinks {
  display:flex;
  gap:1.5rem;
  align-items:center;
  flex-wrap:wrap;
}
.tm-navlinks a {
  text-decoration:none;
  font-weight:600;
  color: var(--primary);
  position: relative;
  transition: color 0.3s;
}
.tm-navlinks a:hover { color: var(--accent); }
.tm-navlinks a.active::after {
  content:'';
  position:absolute;
  bottom:-6px;
  left:0;
  width:100%;
  height:3px;
  background: var(--primary);
  border-radius:4px;
}
.theme-toggle {
  cursor:pointer;
  font-size:0.9rem;
  background: linear-gradient(135deg,var(--primary),var(--accent));
  padding:6px 10px;
  border-radius:6px;
  color: var(--button-color);
  transition:0.3s;
}
.theme-toggle:hover { opacity:0.85; }
@media (max-width:768px){
  .tm-nav { flex-direction:column; align-items:flex-start; height:auto; padding:1rem; }
  .tm-navlinks { flex-direction:column; align-items:flex-start; width:100%; gap:0.6rem; margin-top:0.5rem; }
  .theme-toggle { align-self:flex-start; margin-top:0.5rem; }
}

/* Waves Background */
#waves{position:fixed;bottom:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;}
.wave{position:absolute;width:200%;height:100%;background-repeat:repeat-x;opacity:.4;}
.wave1{background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%234f6df5" fill-opacity="0.4" d="M0,64L40,90.7C80,117,160,171,240,197.3C320,224,400,224,480,186.7C560,149,640,75,720,80C800,85,880,171,960,202.7C1040,235,1120,213,1200,181.3C1280,149,1360,107,1400,85.3L1440,64L1440,320L0,320Z"/></svg>');animation:waveMove 30s linear infinite;bottom:0;}
.wave2{background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23a0c4ff" fill-opacity="0.3" d="M0,96L48,112C96,128,192,160,288,154.7C384,149,480,107,576,112C672,117,768,171,864,197.3C960,224,1056,224,1152,197.3C1248,171,1344,117,1392,90.7L1440,64L1440,320L0,320Z"/></svg>');animation:waveMove 35s linear infinite;bottom:10px;}
@keyframes waveMove{0%{transform:translateX(0);}100%{transform:translateX(-50%);}}

/* Layout */
main{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
  text-align:center;
  transition:color 0.3s;
}
h1{font-size:2.4rem;margin-bottom:10px;}
.subtitle{margin-bottom:30px;color:#555;}
.tabs{display:flex;justify-content:center;gap:16px;margin-bottom:30px;flex-wrap:wrap;}
.tab-button{padding:10px 18px;border:none;border-radius:8px;cursor:pointer;font-size:1rem;background:#e0e7ff;transition:all .3s;}
.tab-button.active{background:var(--primary);color:#fff;font-weight:600;}
.audio-section{display:none;flex-wrap:wrap;gap:24px;justify-content:center;}
.audio-section.active{display:flex;}
.audio-card{
  background:rgba(255,255,255,.35);
  border-radius:16px;
  padding:20px;
  width:280px;
  backdrop-filter:var(--glass-blur);
  box-shadow:0 6px 20px rgba(0,0,0,.15);
  transition:transform .3s;
}
body.dark-theme .audio-card{background:rgba(30,30,30,.35);}
.audio-card:hover{transform:translateY(-4px);}
.audio-card h3{margin-bottom:8px;font-size:1.05rem;}
audio{width:100%;margin-bottom:6px;}
.badge{font-size:.75rem;opacity:.8;}
.download-link{text-decoration:none;font-size:.9rem;color:var(--primary);}
.compat{font-size:.8rem;opacity:.75;margin-top:6px;}
.affirm-card{
  border-radius:18px;padding:20px;width:280px;text-align:center;
  box-shadow:0 6px 20px rgba(0,0,0,.15);cursor:pointer;transition:transform .3s;
  display:flex;flex-direction:column;align-items:center;gap:12px;
}
.affirm-card:hover{transform:translateY(-6px);}
.reveal-btn,.hear-btn{
  padding:8px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s;
}
.reveal-btn{background:#f1f5f9;color:#111;}
.reveal-btn:hover{background:#e0e7ff;}
.hear-btn{background:var(--primary);color:#fff;}
.hear-btn:hover{filter:brightness(.9);}
.affirm-text{
  display:none;font-size:1.05rem;font-weight:600;line-height:1.45;
  padding:12px 14px;border-radius:12px;
  background:rgba(255,255,255,.7);color:#111;
  text-shadow:0 1px 2px rgba(0,0,0,.15);animation:fadeInUp .8s ease;
}
body.dark-theme .affirm-text{
  background:rgba(0,0,0,.55);color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,.5);
}
@keyframes fadeInUp{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>

<div id="waves">
  <div class="wave wave1"></div>
  <div class="wave wave2"></div>
</div>

<header class="tm-nav">
  <a class="tm-brand" href="/home">
    <img src="https://img.icons8.com/fluency/48/brain.png" alt="Theramind Logo">
    <span>Theramind</span>
  </a>
  <nav class="tm-navlinks">
    <a href="/home">üè† Home</a>
    <a href="/index">üí¨ Chat</a>
    <a href="/journaling">üìì Journal</a>
    <a href="/breathing">ü´Å Breathing</a>
    <a href="/pick-a-peace">üìÉ Pick-a-Peace</a>
    <a href="/calm-corner" class="active">üßò Calm Corner</a>
    <a href="/ebooks">üìö E-Books</a>
    <a href="/history">üï∞Ô∏è History</a>
  </nav>
  <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()">üåô Theme</div>
</header>

<main>
  <h1>Find Your Calm</h1>
  <p class="subtitle">Relax, breathe, and let go with soothing sounds, music, and affirmations.</p>

  <div class="tabs" role="tablist">
    <button class="tab-button active" role="tab" aria-selected="true" onclick="switchTab('nature',this)">üå≥ Nature</button>
    <button class="tab-button" role="tab" aria-selected="false" onclick="switchTab('music',this)">üé∂ Music</button>
    <button class="tab-button" role="tab" aria-selected="false" onclick="switchTab('affirm',this)">‚ú® Affirmations</button>
  </div>

  <div id="nature" class="audio-section active"></div>
  <div id="music" class="audio-section"></div>
  <div id="affirm" class="audio-section"></div>
</main>

<script>
// === Audio & Affirmation Data ===
const sourcesNature=[
{title:"Ocean Waves", url:"https://commons.wikimedia.org/wiki/Special:FilePath/Oceanwavescrushing.ogg", format:"OGG"},
{title:"Rain & Thunder", url:"https://commons.wikimedia.org/wiki/Special:FilePath/Rain%20and%20thunder.ogg", format:"OGG"},
{title:"Forest Birds", url:"https://commons.wikimedia.org/wiki/Special:FilePath/Birds%20forest.ogg", format:"OGG"},
{title:"Nightingale & Wind", url:"https://commons.wikimedia.org/wiki/Special:FilePath/Nightingale%20wind%20crickets.ogg", format:"OGG"},
{title:"Water Stream", url:"https://commons.wikimedia.org/wiki/Special:FilePath/Stream.ogg", format:"OGG"},
{title:"Birdsong Dawn", url:"https://commons.wikimedia.org/wiki/Special:FilePath/DawnBirds.ogg", format:"OGG"},
{title:"Forest Rain", url:"https://commons.wikimedia.org/wiki/Special:FilePath/ForestRain.ogg", format:"OGG"},
{title:"Mountain Breeze", url:"https://commons.wikimedia.org/wiki/Special:FilePath/MountainBreeze.ogg", format:"OGG"},
{title:"Desert Wind", url:"https://commons.wikimedia.org/wiki/Special:FilePath/DesertWind.ogg", format:"OGG"},
{title:"River Flow", url:"https://commons.wikimedia.org/wiki/Special:FilePath/RiverFlow.ogg", format:"OGG"}
];

const sourcesMusic=[
{title:"Calm Piano", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", format:"MP3"},
{title:"Relaxing Guitar", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", format:"MP3"},
{title:"Soothing Strings", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", format:"MP3"},
{title:"Meditation Tune", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3", format:"MP3"},
{title:"Ambient Waves", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3", format:"MP3"},
{title:"Deep Focus", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3", format:"MP3"},
{title:"Peaceful Night", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3", format:"MP3"},
{title:"Morning Dew", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3", format:"MP3"},
{title:"Gentle Breeze", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3", format:"MP3"},
{title:"Serenity", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3", format:"MP3"}
];

const affirmations=[
"I am calm and relaxed.","I am at peace with myself.","I release tension from my body.","I breathe deeply and slowly.","I am focused and centered.",
"I am surrounded by positive energy.","I radiate love and joy.","I trust myself completely.","I am confident and strong.","I am resilient and adaptable.",
"My mind is clear and peaceful.","I am grateful for today.","I am open to new opportunities.","I am full of positive thoughts.","I am free from worry and fear.",
"I am healthy and strong.","I choose happiness and joy.","I forgive myself and others.","I am mindful and present.","I am patient and compassionate.",
"I am creative and inspired.","I attract positivity into my life.","I am calm in stressful situations.","I am balanced and harmonious.","I release negative thoughts.",
"I am courageous and bold.","I trust the journey of life.","I am successful in my endeavors.","I am worthy of love and respect.","I am kind and gentle.",
"I am full of energy and vitality.","I am aligned with my purpose.","I am confident in my abilities.","I am loving and lovable.","I am calm amidst chaos.",
"I am grateful for my blessings.","I am connected to my inner self.","I am motivated and determined.","I am peaceful and serene.","I am optimistic about the future.",
"I am capable of achieving my goals.","I am free from doubt and fear.","I am mindful of my actions.","I am confident in making decisions.","I am present in every moment.",
"I am joyful and content.","I am in harmony with the universe.","I am a beacon of positivity.","I am thankful for life.","I am at peace with my past."
];

const cardColors=[
  "linear-gradient(135deg,#a0c4ff,#bdb2ff)",
  "linear-gradient(135deg,#caffbf,#9bf6ff)",
  "linear-gradient(135deg,#ffd6a5,#ffadad)",
  "linear-gradient(135deg,#fdffb6,#caffbf)"
];

let currentAudio = null;
const allAudioElements = {};

function preloadAudio(sources, sectionName){
  allAudioElements[sectionName] = [];
  sources.forEach(item=>{
    const audio = document.createElement('audio');
    audio.src = item.url;
    audio.preload = 'auto';
    audio.onplay = () => {
      if(currentAudio && currentAudio !== audio) currentAudio.pause();
      currentAudio = audio;
    };
    allAudioElements[sectionName].push({audio, title:item.title, format:item.format, url:item.url});
  });
}

// Preload Nature and Music
preloadAudio(sourcesNature, 'nature');
preloadAudio(sourcesMusic, 'music');

function populateAudio(sectionId, sources){
  const section = document.getElementById(sectionId);
  section.innerHTML = '';
  const canPlayOgg = document.createElement('audio').canPlayType('audio/ogg');
  const items = allAudioElements[sectionId] || [];

  items.forEach(item=>{
    const card = document.createElement('div'); card.className='audio-card';
    const title = document.createElement('h3'); title.innerText=item.title;
    const badge = document.createElement('div'); badge.className='badge'; badge.innerText=`Format: ${item.format}`;
    const audio = item.audio; audio.controls = true;
    const download = document.createElement('a'); download.href=item.url; download.download=''; download.className='download-link'; download.innerText='üì• Download';
    card.append(title,badge,audio,download);

    if(item.format==='OGG' && !canPlayOgg){
      const note=document.createElement('div'); note.className='compat';
      note.innerText="If playback doesn't start, tap Download (some browsers don't play .ogg inline).";
      card.appendChild(note);
    }

    section.appendChild(card);
  });
}

function populateAffirmations(){
  const section = document.getElementById('affirm'); 
  section.innerHTML='';
  affirmations.forEach((text,i)=>{
    const card = document.createElement('div'); card.className='affirm-card';
    card.style.background = cardColors[i % cardColors.length];

    const revealBtn = document.createElement('button'); revealBtn.className='reveal-btn'; revealBtn.innerText='Reveal';
    revealBtn.setAttribute('aria-expanded','false');
    const hearBtn = document.createElement('button'); hearBtn.className='hear-btn'; hearBtn.innerText='Hear';
    const span = document.createElement('div'); span.className='affirm-text'; span.innerText=text;

    revealBtn.onclick = () => {
      const isShown = span.style.display === 'block';
      span.style.display = isShown ? 'none' : 'block';
      revealBtn.setAttribute('aria-expanded', String(!isShown));
    };
    hearBtn.onclick = () => { speak(text); };

    card.append(span, revealBtn, hearBtn);
    section.appendChild(card);
  });
}

function switchTab(tabId, btn){
  document.querySelectorAll('.audio-section').forEach(s=>s.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  document.querySelectorAll('.tab-button').forEach(b=>{b.classList.remove('active'); b.setAttribute('aria-selected','false');});
  btn.classList.add('active'); btn.setAttribute('aria-selected','true');

  if(tabId==='nature') populateAudio('nature', sourcesNature);
  if(tabId==='music') populateAudio('music', sourcesMusic);
  if(tabId==='affirm') populateAffirmations();
}

// Theme Toggle
document.addEventListener("DOMContentLoaded", ()=>{
  const currentPath = window.location.pathname;
  document.querySelectorAll(".tm-navlinks a").forEach(link=>{
    if(currentPath.includes(link.getAttribute("href"))) link.classList.add("active");
  });

  const themeToggle = document.getElementById("themeToggle");
  if(localStorage.getItem("theme")==="dark"){
    document.body.classList.add("dark-theme");
    themeToggle.textContent = "‚òÄÔ∏è Theme";
  } else { themeToggle.textContent = "üåô Theme"; }
});

function toggleTheme(){
  const themeToggle=document.getElementById("themeToggle");
  document.body.classList.toggle("dark-theme");
  const isDark = document.body.classList.contains("dark-theme");
  localStorage.setItem("theme", isDark ? "dark" : "light");
  themeToggle.textContent = isDark ? "‚òÄÔ∏è Theme" : "üåô Theme";
}

// Text-to-Speech
function speak(text){
  if(window.speechSynthesis.speaking) window.speechSynthesis.cancel();
  const utter = new SpeechSynthesisUtterance(text);
  window.speechSynthesis.speak(utter);
}

// Initialize first tab
switchTab('nature', document.querySelector('.tab-button.active'));
</script>
</body>
</html>
